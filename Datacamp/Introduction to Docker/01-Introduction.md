# Introduction to Docker

The Docker Command Line Interface (CLI) is your primary tool for sending instructions to the Docker Daemon, which is the core service responsible for managing all Docker objects (containers and images).

- **Docker Daemon:** The background service that manages Docker objects. It must be running for Docker to work.
- **Docker Client:** The CLI or Docker Desktop application through which users interact with the Docker Daemon.
- **Image:** A read-only template or blueprint that defines what will be available inside a container. For example, the `ubuntu` image contains a full Ubuntu operating system.
- **Container:** A runnable instance of an image. When you start a container from an image, you get a running environment defined by that image.

#### Commands for Starting Containers:

*   **`docker run <image-name>`:** Starts a container from a specified image. By default, Docker displays the container's output in your current shell until the container stops.
    *   **Example: `docker run hello-world`**
        *   This command starts a container from the `hello-world` image.
        *   The `hello-world` container is pre-configured by its creator to print an explanatory message about how Docker works and then stop.
*   **`docker run -it <image-name>` (Interactive Containers):** Starts a container and immediately provides an interactive shell within it. This is useful for images that don't have a default output or are meant for interactive use (e.g., operating system images).
    *   **`-i` (interactive):** Keeps `stdin` open even if not attached.
    *   **`-t` (TTY):** Allocates a pseudo-TTY, which allows for an interactive shell.
    *   **Example: `docker run -it ubuntu`**
        *   This command starts an Ubuntu container and drops you into a new shell prompt *inside* that container.
        *   You are now in a clean, isolated Ubuntu environment.
        *   To exit and stop the container, simply type `exit` in the container's shell.
*   **`docker run -d <image-name>` (Detached Containers):** Starts a container in the background (detached mode). This is used for containers that run services (like databases) or process data without needing constant interaction or printing output directly to your shell.
    *   **`-d` (detached):** Runs the container in the background.
    *   **Example: `docker run -d postgres`**
        *   This starts a Postgres database container in the background.

#### Commands for Inspecting and Stopping Containers:

*   **`docker ps`** or **`docker container ls`:** Lists all currently running containers.
    *   The first column shows the unique **Container ID**.
*   **`docker stop <container-id>`** or **`docker stop <container-name>`:** Stops a running container.

**Code Examples:**

```bash
# Run a hello-world image container
docker run hello-world

# Run an ubuntu container and make it interactive in the shell
docker run -it ubuntu

# Run containers in background (detached mode)
docker run -d hello-world 
```
*(Note: Running `hello-world` in detached mode `-d` will still stop quickly as its `ENTRYPOINT` finishes, but its output won't print to your current shell.)*

```shell
# Show running containers
docker container ls 
# Alternative command
docker ps 
```

### 2. Streamlining Container Management

When dealing with many containers, it's crucial to have efficient ways to identify, filter, and view their outputs.

#### Naming Containers:

*   **`docker run --name <container-name> <image-name>`:** Assigns a custom name to a container when it's started. This name appears in the last column of `docker ps` output and can be used interchangeably with the Container ID for other Docker commands.
    *   **Example: `docker run -d --name db_pipeline_v1 postgres`**
        *   Starts a detached Postgres container and names it `db_pipeline_v1`.
    *   You can then use `docker stop db_pipeline_v1` to stop it.

#### Filtering Running Containers:

*   **`docker ps -f "name=<container_name>"`:** Filters the list of running containers based on specific properties.
    *   **`-f` (filter):** Applies a filter.
    *   **Example: `docker ps -f "name=db_pipeline_v1"`**
        *   Shows only the details of the container named `db_pipeline_v1`.
    *   You can filter by other properties too (e.g., `status=exited`).

#### Viewing Container Logs:

*   **`docker logs <container-id_or_name>`:** Displays the output (logs) generated by a container. Useful for debugging.
    *   **Example: `docker logs db_pipeline_v1`**
*   **`docker logs -f <container-id_or_name>` (Follow Logs):** Streams the logs in real-time as the container generates them.
    *   **`-f` (follow):** Continuously displays new log output.
    *   You can exit the live log view by pressing `Ctrl + C`.

#### Removing Containers:

*   **`docker rm <container-id_or_name>`** or **`docker container rm <container-id_or_name>`:** Permanently deletes a *stopped* container from your system, freeing up disk space and allowing its name to be reused.
    *   A stopped container still occupies disk space until removed.
*   **`docker container prune`:** Removes all stopped containers in one go.

**Code Examples:**

```shell
# Run a detached ubuntu container and name it linux_sandbox
docker run -d --name linux_sandbox ubuntu

# Filter running containers by name
docker ps -f "name=linux_sandbox"

# Show the logs of a container
docker logs linux_sandbox

# Stop running containers
docker stop linux_sandbox

# Delete containers (must be stopped first)
docker rm linux_sandbox 
```

### 3. Managing Docker Images

Docker images are the blueprints for your containers. You'll either create custom images or download pre-made ones from registries like Docker Hub.

#### Docker Hub:

*   A public registry where you can find thousands of pre-made Docker images for various use cases (e.g., Ubuntu, Postgres, Nginx).

#### Pulling Images:

*   **`docker pull <image-name>`:** Downloads an image from Docker Hub (or other configured registries).
    *   By default, it pulls the `latest` version of the image.
    *   **Example: `docker pull ubuntu`**
*   **`docker pull <image-name>:<version_or_tag>`:** Downloads a specific version or tag of an image. Versions can be numbers, text, or a combination.
    *   **Example: `docker pull ubuntu:22.04`** or **`docker pull ubuntu:jammy`**
    *   You can find available tags on `hub.docker.com`.

#### Listing Available Images:

*   **`docker images`** or **`docker image ls`:** Lists all Docker images currently available on your local machine.
    *   Displays information like image name, tags, creation date, size, and unique Image ID.

#### Removing Images:

*   **`docker rmi <image-id_or_name>`** or **`docker image rm <image-id_or_name>`:** Permanently deletes an image from your local system to free up disk space.
    *   **Important Constraint:** You cannot delete an image if there are still containers (even stopped ones) based on it. Docker will issue a warning and provide the IDs of the containers preventing the deletion. You must remove those containers first.
    *   **Example:** If `docker rmi ubuntu` fails because a container is using it, you'd first `docker rm <container-id>` then `docker rmi ubuntu`.

#### Clearing Unused Images and Containers:

*   **`docker container prune`:** Removes all stopped (non-running) containers.
*   **`docker image prune`:** Removes only "dangling" images.
    *   **Dangling Image:** An image that no longer has a name or tag because a newer image has taken its name. This often happens during custom image building.
*   **`docker image prune -a`:** Removes *all* unused images, including dangling images and images not associated with any running containers.
    *   **`-a` (all):** Specifies to remove all unused images, not just dangling ones.

**Code Examples:**

```shell
# Download docker images from docker hub or private repos (latest tag by default)
docker pull image_name

# Download images by their tags/versions
docker pull image_name:tag

# List images by their tags
docker images

# Remove all unused or stopped containers
docker container prune

# Remove all unused images (including dangling ones)
docker image prune -a
```